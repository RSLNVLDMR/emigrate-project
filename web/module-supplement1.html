<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="supplement1_title">–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ññ1 - –ö–∞—Ä—Ç–∞ –ø–æ–±—ã—Ç—É –ø–æ —Ä–∞–±–æ—Ç–µ</title>
  <link rel="stylesheet" href="./styles.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 data-i18n="supplement1_title">–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ññ1 - –ö–∞—Ä—Ç–∞ –ø–æ–±—ã—Ç—É –ø–æ —Ä–∞–±–æ—Ç–µ</h1>
      <div class="lang">
        <button data-lang="ru" class="active">RU</button>
        <button data-lang="ua">UA</button>
        <button data-lang="by">BY</button>
      </div>
    </div>

    <!-- –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è -->
    <div class="card">
      <div class="h2" data-i18n="supplement1_description">–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è</div>
      <div class="p" data-i18n="supplement1_description_text">
        –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ññ1 –∫ –∑–∞—è–≤–ª–µ–Ω–∏—é –Ω–∞ –∫–∞—Ä—Ç—É –ø–æ–±—ã—Ç—É –¥–ª—è –ª–∏—Ü, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø–æ —Ç—Ä—É–¥–æ–≤–æ–º—É –¥–æ–≥–æ–≤–æ—Ä—É. 
        –î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –∑–∞—è–≤–ª–µ–Ω–∏—é –ø—Ä–∏ –ø–æ–¥–∞—á–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç—É –ø–æ–±—ã—Ç—É –ø–æ —Ä–∞–±–æ—Ç–µ.
        <br><br>
        <strong>–í–∞–∂–Ω–æ:</strong> –≠—Ç–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å, –Ω–æ –º—ã —Å–æ–≤–µ—Ç—É–µ–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∏ –¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–∏–∫—É –∏–ª–∏ –æ—Ç–¥–µ–ª—É –∫–∞–¥—Ä–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç –∫ –ø–æ–¥–ø–∏—Å–∏.
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="card">
      <div class="h2" data-i18n="supplement1_actions">–î–µ–π—Å—Ç–≤–∏—è</div>
      <div class="button-group">
        <button class="btn btn-primary" onclick="downloadSupplement1()" data-i18n="supplement1_download">
          –°–∫–∞—á–∞—Ç—å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ññ1
        </button>
        <button class="btn secondary" onclick="shareSupplement1()" data-i18n="supplement1_share">
          –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
        </button>
      </div>
    </div>

    <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é -->
    <div class="card">
      <div class="h2" data-i18n="supplement1_instructions">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é</div>
      <ul class="list">
        <li data-i18n="supplement1_instruction_1">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</li>
        <li data-i18n="supplement1_instruction_2">–£–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ</li>
        <li data-i18n="supplement1_instruction_3">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏ –¥–∞–π—Ç–µ –Ω–∞—á–∞–ª—å–Ω–∏–∫—É –∏–ª–∏ –æ—Ç–¥–µ–ª—É –∫–∞–¥—Ä–æ–≤ –∫ –ø–æ–¥–ø–∏—Å–∏</li>
        <li data-i18n="supplement1_instruction_4">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö</li>
        <li data-i18n="supplement1_instruction_5">–ü–æ–¥–ø–∏—à–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç</li>
      </ul>
    </div>

    <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å AI -->
    <div class="card">
      <div class="h2" data-i18n="supplement1_ai_title">ü§ñ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å AI</div>
      <div class="p" data-i18n="supplement1_ai_description">
        –ú—ã —Å–æ–≤–µ—Ç—É–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é AI. –í—ã –º–æ–∂–µ—Ç–µ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É —Å–Ω–∏–∑—É.
      </div>
      <div class="button-group">
        <button class="btn btn-primary" onclick="checkDocumentWithAI()" data-i18n="supplement1_ai_button">
          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å AI
        </button>
      </div>
    </div>

  </div>

  <div class="tabs">
    <a class="tab" href="./translator.html" data-i18n="nav_translator">–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫</a>
    <a class="tab" href="./checklist.html" data-i18n="nav_checklist">–ß–µ–∫–ª–∏—Å—Ç</a>
    <a class="tab" href="./consultant.html" data-i18n="nav_consultant">–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç</a>
  </div>

  <script type="module">
    import { $$, i18n, storage } from './utils.js';
    
    // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ
    window.$$ = $$;
    window.i18n = i18n;
    window.storage = storage;

    function bindLang(){ 
      $$('.lang button').forEach(b=> b.onclick = async ()=> {
        await i18n.load(b.dataset.lang);
        highlightLang();
      }); 
    }

    function highlightLang(){ 
      $$('.lang button').forEach(b=> b.classList.toggle('active', b.dataset.lang===i18n.lang)); 
    }

    function initTG(){ 
      const tg = window.Telegram && window.Telegram.WebApp; 
      if(!tg) return; 
      tg.expand(); 
      tg.ready(); 
    }

    async function boot(){
      initTG();
      bindLang();
      await i18n.load(storage.get('lang','ru'));
      highlightLang();
    }

    document.addEventListener('DOMContentLoaded', boot);
    window.addEventListener('pageshow', boot);
  </script>
  <script>
    (function() {

      // –§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Ññ1
      window.downloadSupplement1 = function() {
        console.log('–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Ññ1...');
        const link = document.createElement('a');
        link.href = './files/dopolnienie-nr1-karta-pobytu-praca.pdf';
        link.download = 'dopolnienie-nr1-karta-pobytu-praca.pdf';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      };

      // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é AI (–∑–∞–≥–ª—É—à–∫–∞)
      window.checkDocumentWithAI = function() {
        console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é AI...');
        alert('–§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é AI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è!');
      };

      // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º ‚Ññ1
      window.shareSupplement1 = function() {
        console.log('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º ‚Ññ1...');
        const fileUrl = window.location.origin + '/files/dopolnienie-nr1-karta-pobytu-praca.pdf';
        
        if (navigator.share) {
          navigator.share({
            title: '–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ññ1 - –ö–∞—Ä—Ç–∞ –ø–æ–±—ã—Ç—É –ø–æ —Ä–∞–±–æ—Ç–µ',
            text: '–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ññ1 –∫ –∑–∞—è–≤–ª–µ–Ω–∏—é –Ω–∞ –∫–∞—Ä—Ç—É –ø–æ–±—ã—Ç—É –¥–ª—è –ª–∏—Ü, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø–æ —Ç—Ä—É–¥–æ–≤–æ–º—É –¥–æ–≥–æ–≤–æ—Ä—É',
            url: fileUrl
          }).catch(err => console.log('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è:', err));
        } else {
          // Fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤ –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Web Share API
          if (navigator.clipboard) {
            navigator.clipboard.writeText(fileUrl).then(() => {
              alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
            }).catch(err => {
              console.log('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:', err);
              // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
              showShareModal(fileUrl);
            });
          } else {
            showShareModal(fileUrl);
          }
        }
      };

      // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Å—Å—ã–ª–∫–æ–π –¥–ª—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è
      function showShareModal(url) {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        `;
        
        const content = document.createElement('div');
        content.style.cssText = `
          background: white;
          padding: 20px;
          border-radius: 8px;
          max-width: 90%;
          word-break: break-all;
        `;
        
        content.innerHTML = `
          <h3>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π</h3>
          <p>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É:</p>
          <input type="text" value="${url}" readonly style="width: 100%; padding: 8px; margin: 10px 0;">
          <button onclick="this.closest('.modal').remove()" style="padding: 8px 16px;">–ó–∞–∫—Ä—ã—Ç—å</button>
        `;
        
        modal.className = 'modal';
        modal.appendChild(content);
        document.body.appendChild(modal);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ input
        const input = content.querySelector('input');
        input.select();
      }

      // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å AI
      window.checkDocumentWithAI = function() {
        console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å AI...');
        alert('–ú–æ–¥—É–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏ AI –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
      };

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
      console.log('–§—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã:', {
        downloadSupplement1: typeof window.downloadSupplement1,
        shareSupplement1: typeof window.shareSupplement1,
        checkDocumentWithAI: typeof window.checkDocumentWithAI
      });
    })();
  </script>
</body>
</html>
